<dx:ThemedWindow x:Class="CulvertEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
        xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars" 
        xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
        xmlns:dxe="http://schemas.devexpress.com/winfx/2008/xaml/editors"
        xmlns:helix="http://helix-toolkit.org/wpf"
        xmlns:sys="clr-namespace:System;assembly=mscorlib"
        Title="Culvert - TDC Toolbox" 
        Background="#FFCCD5F0"
        Height="900" Width="1400"
        dx:ThemeManager.ThemeName="VS2019Blue"
        Loaded="Window_Loaded"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="30"/>
        </Grid.RowDefinitions>

        <!-- ========== TOOLBARS ONLY (NO MENU) ========== -->
        <dxb:BarManager Grid.Row="0" ToolbarGlyphSize="Medium">
            <dxb:BarManager.Items>
                <!-- File Operations -->
                <dxb:BarButtonItem x:Name="btnNew" Content="New" Glyph="{dx:DXImage 'SvgImages/Actions/New.svg'}" ItemClick="NewProject_Click" KeyGesture="Ctrl+N" Hint="New Project"/>
                <dxb:BarButtonItem x:Name="btnOpen" Content="Open" Glyph="{dx:DXImage 'SvgImages/Actions/Open.svg'}" ItemClick="OpenProject_Click" KeyGesture="Ctrl+O" Hint="Open Project"/>
                <dxb:BarButtonItem x:Name="btnSave" Content="Save" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/save.svg'}" ItemClick="SaveProject_Click" KeyGesture="Ctrl+S" Hint="Save Project"/>

                <!-- Edit Operations -->
                <dxb:BarButtonItem x:Name="btnUndo" Content="Undo" Glyph="{dx:DXImage 'SvgImages/Dashboards/Undo.svg'}" ItemClick="Undo_Click" KeyGesture="Ctrl+Z" Hint="Undo"/>
                <dxb:BarButtonItem x:Name="btnRedo" Content="Redo" Glyph="{dx:DXImage 'SvgImages/Dashboards/Redo.svg'}" ItemClick="Redo_Click" KeyGesture="Ctrl+Y" Hint="Redo"/>
                <dxb:BarButtonItem x:Name="btnCut" Content="Cut" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/Cut.svg'}" ItemClick="Cut_Click" KeyGesture="Ctrl+X" Hint="Cut"/>
                <dxb:BarButtonItem x:Name="btnCopy" Content="Copy" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/Copy.svg'}" ItemClick="Copy_Click" KeyGesture="Ctrl+C" Hint="Copy"/>
                <dxb:BarButtonItem x:Name="btnPaste" Content="Paste" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/Paste.svg'}" ItemClick="Paste_Click" KeyGesture="Ctrl+V" Hint="Paste"/>

                <!-- Export Operations -->
                <dxb:BarButtonItem x:Name="btnPrint" Content="Print" Glyph="{dx:DXImage 'SvgImages/Scheduling/Print.svg'}" ItemClick="Print_Click" KeyGesture="Ctrl+P" Hint="Print"/>
                <dxb:BarButtonItem x:Name="btnExportPDF" Content="PDF" Glyph="{dx:DXImage 'SvgImages/XAF/Action_Export_ToPDF.svg'}" ItemClick="ExportPDF_Click" Hint="Export to PDF"/>
                <dxb:BarButtonItem x:Name="btnExportDXF" Content="DXF" Glyph="{dx:DXImage 'SvgImages/Export/ExportFile.svg'}" ItemClick="ExportDXF_Click" Hint="Export to AutoCAD DXF"/>

                <!-- Zoom Operations -->
                <dxb:BarButtonItem x:Name="btnZoomIn" Content="Zoom In" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/ZoomIn.svg'}" ItemClick="ZoomIn_Click" Hint="Zoom In"/>
                <dxb:BarButtonItem x:Name="btnZoomOut" Content="Zoom Out" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/ZoomOut.svg'}" ItemClick="ZoomOut_Click" Hint="Zoom Out"/>
                <dxb:BarButtonItem x:Name="btnZoomFit" Content="Fit" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/BestFit.svg'}" ItemClick="ZoomFit_Click" Hint="Zoom to Fit"/>
                <dxb:BarButtonItem x:Name="btnZoomReset" Content="100%" Glyph="{dx:DXImage 'SvgImages/Zoom/Zoom100.svg'}" ItemClick="ZoomReset_Click" Hint="Reset Zoom to 100%"/>

                <!-- Scale Selection -->
                <dxb:BarSubItem x:Name="btnScaleMenu" Content="Scale: 1:100" Glyph="{dx:DXImage 'SvgImages/Dashboards/Scale.svg'}" Hint="Select Drawing Scale">
                    <dxb:BarCheckItem Content="1:20 (Detail)" Tag="20" CheckedChanged="ScaleSelected_Changed" GroupIndex="1"/>
                    <dxb:BarCheckItem Content="1:50 (Large)" Tag="50" CheckedChanged="ScaleSelected_Changed" GroupIndex="1"/>
                    <dxb:BarCheckItem Content="1:100 (Standard)" Tag="100" IsChecked="True" CheckedChanged="ScaleSelected_Changed" GroupIndex="1"/>
                    <dxb:BarCheckItem Content="1:200 (Medium)" Tag="200" CheckedChanged="ScaleSelected_Changed" GroupIndex="1"/>
                    <dxb:BarCheckItem Content="1:500 (Small)" Tag="500" CheckedChanged="ScaleSelected_Changed" GroupIndex="1"/>
                    <dxb:BarCheckItem Content="1:1000 (Site)" Tag="1000" CheckedChanged="ScaleSelected_Changed" GroupIndex="1"/>
                </dxb:BarSubItem>

                <!-- Tab Buttons (Views) -->
                <dxb:BarCheckItem x:Name="btnTabPlan" Content="PLAN &amp; ELEVATION" 
                                  Glyph="/Images/PlanView.png" 
                                  IsChecked="True" 
                                  GroupIndex="10" 
                                  ItemClick="TabPlan_Click" 
                                  Hint="Plan and Elevation View"
                                  RibbonStyle="Large"/>

                <dxb:BarCheckItem x:Name="btnTabSection" Content="SECTION" 
                                  Glyph="/Images/SectionView.png" 
                                  GroupIndex="10" 
                                  ItemClick="TabSection_Click" 
                                  Hint="Section View"
                                  RibbonStyle="Large"/>

                <dxb:BarCheckItem x:Name="btnTab3D" Content="3D VIEW" 
                                  Glyph="/Images/3DView.png" 
                                  GroupIndex="10" 
                                  ItemClick="Tab3D_Click" 
                                  Hint="3D View"
                                  RibbonStyle="Large"/>

                <!-- Tools -->
                <dxb:BarButtonItem x:Name="btnCreate3D" Content="Create 3D" Glyph="{dx:DXImage 'SvgImages/XAF/Action_EditModel.svg'}" ItemClick="Calculate_Click" Hint="Generate 3D Model"/>
                <dxb:BarButtonItem x:Name="btnValidate" Content="Validate" Glyph="{dx:DXImage 'SvgImages/Content/CheckBox.svg'}" ItemClick="Validate_Click" Hint="Validate Design"/>

                <!-- Display Options -->
                <dxb:BarCheckItem x:Name="btnShowDimensions" Content="Dimensions" IsChecked="True" Glyph="{dx:DXImage 'SvgImages/RichEdit/RulerHorizontal.svg'}" CheckedChanged="ToggleDimensions_CheckedChanged" Hint="Show/Hide Dimensions"/>
                <dxb:BarCheckItem x:Name="btnShowPoints" Content="Points" IsChecked="True" Glyph="{dx:DXImage 'SvgImages/Scheduling/AppointmentDayClock.svg'}" CheckedChanged="TogglePoints_CheckedChanged" Hint="Show/Hide Points"/>
                <dxb:BarCheckItem x:Name="btnShowGrid" Content="Grid" IsChecked="True" Glyph="{dx:DXImage 'SvgImages/RichEdit/BordersGrid.svg'}" Hint="Show/Hide Grid"/>

                <!-- Panel Visibility (for View menu) -->
                <dxb:BarCheckItem x:Name="btnPlanParams" Content="Plan Parameters" IsChecked="True" CheckedChanged="TogglePlanParams_CheckedChanged"/>
                <dxb:BarCheckItem x:Name="btnPlanView" Content="Plan Preview" IsChecked="True" CheckedChanged="TogglePlanView_CheckedChanged"/>
                <dxb:BarCheckItem x:Name="btnElevationView" Content="Elevation Preview" IsChecked="True" CheckedChanged="ToggleElevationView_CheckedChanged"/>
                <dxb:BarCheckItem x:Name="btnSectionParams" Content="Section Parameters" IsChecked="True" CheckedChanged="ToggleSectionParams_CheckedChanged"/>
                <dxb:BarCheckItem x:Name="btnSectionView" Content="Section Preview" IsChecked="True" CheckedChanged="ToggleSectionView_CheckedChanged"/>
                <dxb:BarCheckItem x:Name="btn3DParams" Content="3D Parameters" IsChecked="True" CheckedChanged="Toggle3DParams_CheckedChanged"/>
                <dxb:BarCheckItem x:Name="btn3DView" Content="3D Preview" IsChecked="True" CheckedChanged="Toggle3DView_CheckedChanged"/>

                <!-- View Panels SubMenu -->
                <dxb:BarSubItem x:Name="btnPanelsMenu" Content="Panels" Glyph="{dx:DXImage 'SvgImages/Dashboards/Layout.svg'}" Hint="Show/Hide Panels">
                    <dxb:BarSubItem Content="Plan View" Glyph="/Images/PlanView.png">
                        <dxb:BarCheckItemLink BarItemName="btnPlanParams"/>
                        <dxb:BarCheckItemLink BarItemName="btnPlanView"/>
                        <dxb:BarCheckItemLink BarItemName="btnElevationView"/>
                    </dxb:BarSubItem>
                    <dxb:BarSubItem Content="Section View" Glyph="/Images/SectionView.png">
                        <dxb:BarCheckItemLink BarItemName="btnSectionParams"/>
                        <dxb:BarCheckItemLink BarItemName="btnSectionView"/>
                    </dxb:BarSubItem>
                    <dxb:BarSubItem Content="3D View" Glyph="/Images/3DView.png">
                        <dxb:BarCheckItemLink BarItemName="btn3DParams"/>
                        <dxb:BarCheckItemLink BarItemName="btn3DView"/>
                    </dxb:BarSubItem>
                </dxb:BarSubItem>

                <!-- Settings -->
                <dxb:BarButtonItem x:Name="btnResetSettings" Content="Reset" Glyph="{dx:DXImage 'SvgImages/Outlook Inspired/Reset.svg'}" ItemClick="ResetSettings_Click" Hint="Reset All Settings"/>
                <dxb:BarButtonItem x:Name="btnHelp" Content="Help" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/BindingEditorHelpIcon.svg'}" ItemClick="Help_Click" KeyGesture="F1" Hint="Help (F1)"/>
                <dxb:BarButtonItem x:Name="btnAbout" Content="About" Glyph="{dx:DXImage 'SvgImages/Outlook Inspired/About.svg'}" ItemClick="About_Click" Hint="About"/>
            </dxb:BarManager.Items>

            <dxb:BarManager.Bars>
                <!-- ========== TOOLBAR 1: FILE & EDIT ========== -->
                <dxb:Bar Caption="File &amp; Edit" GlyphSize="Medium">
                    <dxb:BarButtonItemLink BarItemName="btnNew"/>
                    <dxb:BarButtonItemLink BarItemName="btnOpen"/>
                    <dxb:BarButtonItemLink BarItemName="btnSave"/>
                    <dxb:BarItemLinkSeparator/>
                    <dxb:BarButtonItemLink BarItemName="btnUndo"/>
                    <dxb:BarButtonItemLink BarItemName="btnRedo"/>
                    <dxb:BarButtonItemLink BarItemName="btnCut"/>
                    <dxb:BarButtonItemLink BarItemName="btnCopy"/>
                    <dxb:BarButtonItemLink BarItemName="btnPaste"/>
                </dxb:Bar>

                <!-- ========== TOOLBAR 2: EXPORT & ZOOM ========== -->
                <dxb:Bar Caption="Export &amp; Zoom">
                    <dxb:BarButtonItemLink BarItemName="btnPrint"/>
                    <dxb:BarButtonItemLink BarItemName="btnExportPDF"/>
                    <dxb:BarButtonItemLink BarItemName="btnExportDXF"/>
                    <dxb:BarItemLinkSeparator/>
                    <dxb:BarSubItemLink BarItemName="btnScaleMenu"/>
                    <dxb:BarItemLinkSeparator/>
                    <dxb:BarButtonItemLink BarItemName="btnZoomIn"/>
                    <dxb:BarButtonItemLink BarItemName="btnZoomOut"/>
                    <dxb:BarButtonItemLink BarItemName="btnZoomFit"/>
                    <dxb:BarButtonItemLink BarItemName="btnZoomReset"/>
                </dxb:Bar>

                <!-- ========== TOOLBAR 3: VIEWS (TAB BUTTONS) ========== -->
                <dxb:Bar Caption="Views">
                    <dxb:BarCheckItemLink BarItemName="btnTabPlan"/>
                    <dxb:BarCheckItemLink BarItemName="btnTabSection"/>
                    <dxb:BarCheckItemLink BarItemName="btnTab3D"/>
                </dxb:Bar>

                <!-- ========== TOOLBAR 4: TOOLS & DISPLAY ========== -->
                <dxb:Bar Caption="Tools &amp; Display">
                    <dxb:BarButtonItemLink BarItemName="btnCreate3D"/>
                    <dxb:BarButtonItemLink BarItemName="btnValidate"/>
                    <dxb:BarItemLinkSeparator/>
                    <dxb:BarCheckItemLink BarItemName="btnShowDimensions"/>
                    <dxb:BarCheckItemLink BarItemName="btnShowPoints"/>
                    <dxb:BarCheckItemLink BarItemName="btnShowGrid"/>
                    <dxb:BarItemLinkSeparator/>
                    <dxb:BarSubItemLink BarItemName="btnPanelsMenu"/>
                </dxb:Bar>

                <!-- ========== TOOLBAR 5: SETTINGS ========== -->
                <dxb:Bar Caption="Settings &amp; Help">
                    <dxb:BarButtonItemLink BarItemName="btnResetSettings"/>
                    <dxb:BarItemLinkSeparator/>
                    <dxb:BarButtonItemLink BarItemName="btnHelp"/>
                    <dxb:BarButtonItemLink BarItemName="btnAbout"/>
                </dxb:Bar>
            </dxb:BarManager.Bars>
        </dxb:BarManager>

        <!-- ========== CONTENT AREA ========== -->
        <Grid Grid.Row="1" x:Name="contentArea">

            <!-- ========== PLAN & ELEVATION VIEW ========== -->
            <Grid x:Name="gridPlanView" Visibility="Visible">
                <dxdo:DockLayoutManager x:Name="dockManagerPlan" Margin="0">
                    <dxdo:LayoutGroup>

                        <!-- PANEL 1: PARAMETERS -->
                        <dxdo:LayoutPanel x:Name="panelPlanParams" Caption="PARAMETERS" AllowFloat="True" ItemWidth="280" Background="WhiteSmoke">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15">
                                    <TextBlock Text="BẢN QUÁ ĐỘ" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="L1:"/>
                                        <TextBox Grid.Column="1" x:Name="txtL1" Text="24500" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W1:"/>
                                        <TextBox Grid.Column="1" x:Name="txtW1" Text="4000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="SÂN CỐNG" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="L2:"/>
                                        <TextBox Grid.Column="1" x:Name="txtL2" Text="5000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W2:"/>
                                        <TextBox Grid.Column="1" x:Name="txtW2" Text="1800" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W3:"/>
                                        <TextBox Grid.Column="1" x:Name="txtW3" Text="2000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="CỐNG HỘP" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W:"/>
                                        <TextBox Grid.Column="1" x:Name="txtW" Text="5000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="L3:"/>
                                        <TextBox Grid.Column="1" x:Name="txtL3" Text="30000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="TƯỜNG CÁNH" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Alpha:"/>
                                        <TextBox Grid.Column="1" x:Name="txtAlpha" Text="20" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="°" Margin="5,0,0,0"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <CheckBox x:Name="chkShowDimensions" Content="Show Dimensions" IsChecked="True" Margin="5" Checked="OnDimensionChanged" Unchecked="OnDimensionChanged"/>
                                    <CheckBox x:Name="chkShowPoints" Content="Show Points" IsChecked="True" Margin="5" Checked="OnDimensionChanged" Unchecked="OnDimensionChanged"/>
                                    <Button Content="RESET" Margin="0,15,0,0" Click="OnResetPlanElevation" Height="35" Background="#0078D4" Foreground="White" FontWeight="Bold"/>
                                </StackPanel>
                            </ScrollViewer>
                        </dxdo:LayoutPanel>

                        <!-- GROUP: PLAN + ELEVATION -->
                        <dxdo:LayoutGroup Orientation="Vertical">

                            <!-- PANEL 2: PLAN VIEW -->
                            <dxdo:LayoutPanel x:Name="panelPlanView" Caption="PLAN PREVIEW" AllowFloat="True">
                                <Grid>
                                    <Grid x:Name="zoomContainerPlan" Background="WhiteSmoke" ClipToBounds="True">
                                        <Canvas x:Name="planCanvas" Width="1000" Height="400" Background="Transparent"/>
                                    </Grid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15">
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomInPlan_Click" Glyph="{dx:FontIconSource 59555, ColorName=Blue}" ToolTip="Zoom In" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomOutPlan_Click" Glyph="{dx:FontIconSource 59167, ColorName=Blue}" ToolTip="Zoom Out" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomFitPlan_Click" Glyph="{dx:FontIconSource 59814, ColorName=Blue}" ToolTip="Fit" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomResetPlan_Click" Glyph="{dx:FontIconSource 59180, ColorName=Blue}" ToolTip="Reset" Margin="2" GlyphHeight="15" CornerRadius="5"/>
                                        <TextBlock x:Name="txtZoomLevelPlan" Text="100%" Foreground="#0078D4" FontWeight="Bold" VerticalAlignment="Center" Margin="8,0,0,0" Background="GhostWhite"/>
                                    </StackPanel>
                                </Grid>
                            </dxdo:LayoutPanel>

                            <!-- PANEL 3: ELEVATION VIEW -->
                            <dxdo:LayoutPanel x:Name="panelElevationView" Caption="ELEVATION PREVIEW" AllowFloat="True">
                                <Grid>
                                    <Grid x:Name="zoomContainerElevation" Background="#F0F0F0" ClipToBounds="True">
                                        <Canvas x:Name="elevationCanvas" Width="1000" Height="400" Background="Transparent"/>
                                    </Grid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15">
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomInElevation_Click" Glyph="{dx:FontIconSource 59555, ColorName=Blue}" ToolTip="Zoom In" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomOutElevation_Click" Glyph="{dx:FontIconSource 59167, ColorName=Blue}" ToolTip="Zoom Out" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomFitElevation_Click" Glyph="{dx:FontIconSource 59814, ColorName=Blue}" ToolTip="Fit" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomResetElevation_Click" Glyph="{dx:FontIconSource 59180, ColorName=Blue}" ToolTip="Reset" Margin="2" GlyphHeight="15" CornerRadius="5"/>
                                        <TextBlock x:Name="txtZoomLevelElevation" Text="100%" Foreground="#0078D4" FontWeight="Bold" VerticalAlignment="Center" Margin="8,0,0,0" Background="GhostWhite"/>
                                    </StackPanel>
                                </Grid>
                            </dxdo:LayoutPanel>

                        </dxdo:LayoutGroup>
                    </dxdo:LayoutGroup>
                </dxdo:DockLayoutManager>
            </Grid>

            <!-- ========== SECTION VIEW ========== -->
            <Grid x:Name="gridSectionView" Visibility="Collapsed">
                <dxdo:DockLayoutManager x:Name="dockManagerSection" Margin="0">
                    <dxdo:LayoutGroup>
                        <dxdo:TabbedGroup ItemWidth="280">
                            <dxdo:LayoutPanel x:Name="panelSectionParams" Caption="Pipe - Excavation" AllowFloat="True" Background="WhiteSmoke">
                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <StackPanel Margin="15">
                                        <TextBlock Text="KÍCH THƯỚC" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                        <Grid Margin="0,5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="45"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Width:"/>
                                            <TextBox Grid.Column="1" x:Name="txtSectionWidth" Text="5000" TextChanged="OnSectionChanged"/>
                                            <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                        </Grid>
                                        <Grid Margin="0,5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="45"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Height:"/>
                                            <TextBox Grid.Column="1" x:Name="txtSectionHeight" Text="3000" TextChanged="OnSectionChanged"/>
                                            <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                        </Grid>
                                        <Grid Margin="0,5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="45"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Wall:"/>
                                            <TextBox Grid.Column="1" x:Name="txtWallThickness" Text="300" TextChanged="OnSectionChanged"/>
                                            <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                        </Grid>

                                        <Separator Margin="0,10"/>

                                        <TextBlock Text="PHUI ĐÀO" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                        <Grid Margin="0,5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="45"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Depth:"/>
                                            <TextBox Grid.Column="1" x:Name="txtExcavationDepth" Text="2000" TextChanged="OnSectionChanged"/>
                                            <TextBlock Grid.Column="2" Text="mm" Margin="5,0,0,0"/>
                                        </Grid>
                                        <Grid Margin="0,5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="90"/>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="45"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBlock Text="Slope:"/>
                                            <TextBox Grid.Column="1" x:Name="txtSlopeRatio" Text="1.5" TextChanged="OnSectionChanged"/>
                                            <TextBlock Grid.Column="2" Text="(1:n)" Margin="5,0,0,0"/>
                                        </Grid>

                                        <Separator Margin="0,10"/>

                                        <CheckBox x:Name="chkShowSectionDimensions" Content="Show Dimensions" IsChecked="True" Margin="5" Checked="OnSectionChanged" Unchecked="OnSectionChanged"/>
                                        <CheckBox x:Name="chkShowExcavation" Content="Show Excavation" IsChecked="True" Margin="5" Checked="OnSectionChanged" Unchecked="OnSectionChanged"/>
                                        <Button Content="RESET" Margin="0,15,0,0" Click="OnResetSection" Height="35" Background="#0078D4" Foreground="White" FontWeight="Bold"/>
                                    </StackPanel>
                                </ScrollViewer>
                            </dxdo:LayoutPanel>
                            <dxdo:LayoutPanel  Caption="Joint" AllowFloat="True" Background="WhiteSmoke"/>
                        </dxdo:TabbedGroup>

                        <dxdo:LayoutPanel x:Name="panelSectionCanvas" Caption="PREVIEW" AllowFloat="True">
                            <Grid>
                                <Grid x:Name="zoomContainerSection" Background="#FAFAFA" ClipToBounds="True">
                                    <Canvas x:Name="sectionCanvas" Width="1000" Height="800" Background="Transparent"/>
                                </Grid>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15">
                                    <dx:SimpleButton Width="32" Height="32" Click="ZoomInSection_Click" Glyph="{dx:FontIconSource 59555, ColorName=Blue}" ToolTip="Zoom In" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                    <dx:SimpleButton Width="32" Height="32" Click="ZoomOutSection_Click" Glyph="{dx:FontIconSource 59167, ColorName=Blue}" ToolTip="Zoom Out" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                    <dx:SimpleButton Width="32" Height="32" Click="ZoomFitSection_Click" Glyph="{dx:FontIconSource 59814, ColorName=Blue}" ToolTip="Fit" Margin="2" GlyphHeight="20" CornerRadius="5"/>
                                    <dx:SimpleButton Width="32" Height="32" Click="ZoomResetSection_Click" Glyph="{dx:FontIconSource 59180, ColorName=Blue}" ToolTip="Reset" Margin="2" GlyphHeight="15" CornerRadius="5"/>
                                    <TextBlock x:Name="txtZoomLevelSection" Text="100%" Foreground="#0078D4" FontWeight="Bold" VerticalAlignment="Center" Margin="8,0,0,0" Background="GhostWhite"/>
                                </StackPanel>
                            </Grid>
                        </dxdo:LayoutPanel>

                    </dxdo:LayoutGroup>
                </dxdo:DockLayoutManager>
            </Grid>

            <!-- ========== 3D VIEW ========== -->
            <Grid x:Name="grid3DView" Visibility="Collapsed">
                <dxdo:DockLayoutManager x:Name="dockManager3D" Margin="0">
                    <dxdo:LayoutGroup>

                        <!-- PANEL 1: PARAMETERS -->
                        <dxdo:LayoutPanel x:Name="panel3DParams" Caption="PARAMETERS" AllowFloat="True" ItemWidth="280" Background="WhiteSmoke">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15">
                                    <TextBlock Text="CAMERA" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Button Content="Front View" Click="CameraFront_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Back View" Click="CameraBack_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Top View" Click="CameraTop_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Left View" Click="CameraLeft_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Right View" Click="CameraRight_Click" Margin="0,3" Height="30"/>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="DISPLAY" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <CheckBox x:Name="chkShowWireframe" Content="Wireframe" IsChecked="False" Margin="5" Checked="OnDisplayChanged" Unchecked="OnDisplayChanged"/>
                                    <CheckBox x:Name="chkShowBoundingBox" Content="Bounding Box" IsChecked="False" Margin="5" Checked="OnDisplayChanged" Unchecked="OnDisplayChanged"/>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="MATERIAL" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <ComboBox x:Name="cmbMaterial" SelectionChanged="OnMaterialChanged" Margin="5" Height="30">
                                        <ComboBoxItem Content="Concrete" IsSelected="True"/>
                                        <ComboBoxItem Content="Steel"/>
                                        <ComboBoxItem Content="Plastic"/>
                                    </ComboBox>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="EXPORT" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Button Content="Export OBJ" Click="ExportOBJ_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Export STL" Click="ExportSTL_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Screenshot" Click="ExportScreenshot_Click" Margin="0,3" Height="30"/>

                                    <Separator Margin="0,10"/>

                                    <Button Content="RESET 3D" Margin="0,10,0,0" Click="OnReset3D" Height="35" Background="#0078D4" Foreground="White" FontWeight="Bold"/>
                                </StackPanel>
                            </ScrollViewer>
                        </dxdo:LayoutPanel>

                        <!-- PANEL 2: 3D VIEW -->
                        <dxdo:LayoutPanel x:Name="panel3DCanvas" Caption="PREVIEW" AllowFloat="True">
                            <Grid>
                                <helix:HelixViewport3D x:Name="helixViewport" Background="WhiteSmoke" ShowViewCube="True" ShowCoordinateSystem="True"
                                    ZoomExtentsWhenLoaded="True" CameraRotationMode="Turntable" ModelUpDirection="0,1,0"
                                    RotateGesture="Shift+MiddleClick" PanGesture="MiddleClick">
                                    <helix:HelixViewport3D.Camera>
                                        <PerspectiveCamera Position="15,10,15" LookDirection="-15,-10,-15" UpDirection="0,1,0" FieldOfView="60"/>
                                    </helix:HelixViewport3D.Camera>
                                    <helix:DefaultLights/>
                                    <helix:GridLinesVisual3D Width="50" Length="50" MinorDistance="1" MajorDistance="5" Thickness="0.01" Fill="#40FFFFFF" Normal="0,1,0"/>
                                    <ModelVisual3D x:Name="modelVisual3D"/>
                                </helix:HelixViewport3D>

                                <TextBlock x:Name="txt3DInfo" Text="3D View" Foreground="White" Background="#AA000000" Padding="8,4" FontWeight="Bold" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="15"/>
                            </Grid>
                        </dxdo:LayoutPanel>

                    </dxdo:LayoutGroup>
                </dxdo:DockLayoutManager>
            </Grid>
        </Grid>

        <StatusBar Grid.Row="2" Background="#F5F5F5" Height="25">
            <StatusBarItem>
                <TextBlock x:Name="txtExportInfo" Text="Ready to export" Foreground="#0078D4"/>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Scale: " Foreground="Gray"/>
                    <TextBlock x:Name="txtCurrentScale" Text="1:100" FontWeight="SemiBold"/>
                </StackPanel>
            </StatusBarItem>
            <Separator/>
            <StatusBarItem>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Text Height: " Foreground="Gray"/>
                    <TextBlock x:Name="txtTextHeight" Text="2.5 mm" FontWeight="SemiBold"/>
                </StackPanel>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</dx:ThemedWindow>