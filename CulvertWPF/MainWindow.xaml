<Window x:Class="CulvertEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:dx="http://schemas.devexpress.com/winfx/2008/xaml/core"
        xmlns:dxr="http://schemas.devexpress.com/winfx/2008/xaml/ribbon"
        xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars" 
        xmlns:dxdo="http://schemas.devexpress.com/winfx/2008/xaml/docking"
        xmlns:helix="http://helix-toolkit.org/wpf"
        Title="Culvert Box - Design Tool" 
        Height="900" Width="1400"
        Background="White"
        dx:ThemeManager.ThemeName="Win11Light"
        Loaded="Window_Loaded"
        WindowStartupLocation="CenterScreen">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- ========== RIBBON ========== -->
        <dxr:RibbonControl Grid.Row="0" RibbonHeaderVisibility="Collapsed" RibbonStyle="Office2019">
            <dxr:RibbonDefaultPageCategory>
                <dxr:RibbonPage Caption="HOME">

                    <!-- GROUP: FILE -->
                    <dxr:RibbonPageGroup Caption="File" ShowCaptionButton="False">
                        <dxb:BarButtonItem Content="New" LargeGlyph="{dx:DXImage 'SvgImages/Actions/New.svg'}" ItemClick="NewProject_Click" RibbonStyle="Large" KeyGesture="Ctrl+N"/>
                        <dxb:BarButtonItem Content="Open" LargeGlyph="{dx:DXImage 'SvgImages/Actions/Open.svg'}" ItemClick="OpenProject_Click" RibbonStyle="Large" KeyGesture="Ctrl+O"/>
                        <dxb:BarButtonItem Content="Save" LargeGlyph="{dx:DXImage 'SvgImages/DiagramIcons/save.svg'}" ItemClick="SaveProject_Click" RibbonStyle="Large" KeyGesture="Ctrl+S"/>
                    </dxr:RibbonPageGroup>

                    <!-- GROUP: EXPORT -->
                    <dxr:RibbonPageGroup Caption="Export" ShowCaptionButton="False">
                        <dxb:BarButtonItem Content="PDF" LargeGlyph="{dx:DXImage 'SvgImages/XAF/Action_Export_ToPDF.svg'}" ItemClick="ExportPDF_Click" RibbonStyle="Large"/>
                        <dxb:BarButtonItem Content="DXF" LargeGlyph="{dx:DXImage 'SvgImages/Export/ExportFile.svg'}" ItemClick="ExportDXF_Click" RibbonStyle="Large"/>
                        <dxb:BarButtonItem Content="Print" LargeGlyph="{dx:DXImage 'SvgImages/Scheduling/Print.svg'}" ItemClick="Print_Click" RibbonStyle="Large" KeyGesture="Ctrl+P"/>
                    </dxr:RibbonPageGroup>

                    <!-- GROUP: DISPLAY -->
                    <dxr:RibbonPageGroup Caption="Display" ShowCaptionButton="False">
                        <dxb:BarCheckItem Content="Dimension" Glyph="{dx:DXImage 'SvgImages/Dashboards/ReorderTabs.svg'}" IsChecked="True" CheckedChanged="ToggleDimensions_CheckedChanged" RibbonStyle="SmallWithText"/>
                        <dxb:BarCheckItem Content="Point" Glyph="{dx:DXImage 'SvgImages/DiagramIcons/CircularLayout.svg'}" IsChecked="True" CheckedChanged="TogglePoints_CheckedChanged" RibbonStyle="SmallWithText"/>
                        <dxb:BarCheckItem x:Name="chkLayoutOrientation" Content="Vertical" Glyph="{dx:DXImage 'SvgImages/Layout/TableLayout.svg'}" IsChecked="False" CheckedChanged="ToggleLayoutOrientation_CheckedChanged" RibbonStyle="SmallWithText"/>
                    </dxr:RibbonPageGroup>

                    <!-- ✅ PANELS GROUP WITH DROPDOWN -->
                    <dxr:RibbonPageGroup Caption="Panels" ShowCaptionButton="False">

                        <!-- Dropdown button cho từng tab -->
                        <dxb:BarSubItem Content="Plan - Elevation" 
                    Glyph="{dx:DXImage 'SvgImages/Spreadsheet/FieldListPanelPivotTable.svg'}"
                    RibbonStyle="Large">
                            <dxb:BarCheckItem Content="Parameters Panel" IsChecked="True" CheckedChanged="TogglePlanParams_CheckedChanged"/>
                            <dxb:BarCheckItem Content="Plan View Panel" IsChecked="True" CheckedChanged="TogglePlanView_CheckedChanged"/>
                            <dxb:BarCheckItem Content="Elevation View Panel" IsChecked="True" CheckedChanged="ToggleElevationView_CheckedChanged"/>
                        </dxb:BarSubItem>

                        <dxb:BarSubItem Content="Section" 
                    Glyph="{dx:DXImage 'SvgImages/Spreadsheet/FieldListPanelPivotTable.svg'}"
                    RibbonStyle="Large">
                            <dxb:BarCheckItem Content="Parameters Panel" IsChecked="True" CheckedChanged="ToggleSectionParams_CheckedChanged"/>
                            <dxb:BarCheckItem Content="Section View Panel" IsChecked="True" CheckedChanged="ToggleSectionView_CheckedChanged"/>
                        </dxb:BarSubItem>

                        <dxb:BarSubItem Content="3D View" 
                    Glyph="{dx:DXImage 'SvgImages/Spreadsheet/FieldListPanelPivotTable.svg'}"
                    RibbonStyle="Large">
                            <dxb:BarCheckItem Content="Controls Panel" IsChecked="True" CheckedChanged="Toggle3DParams_CheckedChanged"/>
                            <dxb:BarCheckItem Content="3D View Panel" IsChecked="True" CheckedChanged="Toggle3DView_CheckedChanged"/>
                        </dxb:BarSubItem>

                    </dxr:RibbonPageGroup>

                    <!-- GROUP: TOOLS -->
                    <dxr:RibbonPageGroup Caption="Tools" ShowCaptionButton="False">
                        <dxb:BarButtonItem Content="Calculate" LargeGlyph="{dx:DXImage 'SvgImages/Icon Builder/Business_Calculator.svg'}" ItemClick="Calculate_Click" RibbonStyle="Large"/>
                        <dxb:BarButtonItem Content="Validate" LargeGlyph="{dx:DXImage 'SvgImages/Content/CheckBox.svg'}" ItemClick="Validate_Click" RibbonStyle="Large"/>
                    </dxr:RibbonPageGroup>

                    <!-- GROUP: HELP -->
                    <dxr:RibbonPageGroup Caption="Help" ShowCaptionButton="False">
                        <dxb:BarButtonItem Content="Help" LargeGlyph="{dx:DXImage 'SvgImages/DiagramIcons/BindingEditorHelpIcon.svg'}" ItemClick="Help_Click" RibbonStyle="Large" KeyGesture="F1"/>
                        <dxb:BarButtonItem Content="About" LargeGlyph="{dx:DXImage 'SvgImages/Outlook Inspired/About.svg'}" ItemClick="About_Click" RibbonStyle="Large"/>
                    </dxr:RibbonPageGroup>

                </dxr:RibbonPage>
            </dxr:RibbonDefaultPageCategory>
        </dxr:RibbonControl>

        <!-- ========== TAB CONTROL ========== -->
        <dx:DXTabControl Grid.Row="1" x:Name="mainTabControl" Background="White" SelectedIndex="0" SelectionChanged="MainTabControl_SelectionChanged">

            <!-- ========== TAB 1: PLAN & ELEVATION ========== -->
            <dx:DXTabItem>
                <dx:DXTabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="/Images/PlanView.png" 
                               Width="16" Height="16" 
                               Margin="0,0,5,0"
                               RenderOptions.BitmapScalingMode="HighQuality"/>
                        <TextBlock Text="ELEVATION &amp; PLAN VIEW" VerticalAlignment="Center" FontWeight="SemiBold"/>
                    </StackPanel>
                </dx:DXTabItem.Header>
                <dxdo:DockLayoutManager x:Name="dockManagerPlan">
                    <dxdo:LayoutGroup>

                        <!-- PANEL 1: THÔNG SỐ CỐNG HỘP -->
                        <dxdo:LayoutPanel x:Name="panelPlanParams" Caption="THÔNG SỐ CỐNG HỘP" AllowFloat="True" AllowClose="True" ItemWidth="320">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15">
                                    <TextBlock Text="BẢN QUÁ ĐỘ" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="L1:"/>
                                        <TextBox Grid.Column="1" x:Name="txtL1" Text="24500" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W1:"/>
                                        <TextBox Grid.Column="1" x:Name="txtW1" Text="4000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="SÂN CỐNG" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="L2:"/>
                                        <TextBox Grid.Column="1" x:Name="txtL2" Text="5000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W2:"/>
                                        <TextBox Grid.Column="1" x:Name="txtW2" Text="1800" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W3:"/>
                                        <TextBox Grid.Column="1" x:Name="txtW3" Text="2000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="CỐNG HỘP" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="W:"/>
                                        <TextBox Grid.Column="1" x:Name="txtW" Text="5000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="L3:"/>
                                        <TextBox Grid.Column="1" x:Name="txtL3" Text="30000" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="TƯỜNG CÁNH" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Alpha:"/>
                                        <TextBox Grid.Column="1" x:Name="txtAlpha" Text="20" TextChanged="OnDimensionChanged"/>
                                        <TextBlock Grid.Column="2" Text="°"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <CheckBox x:Name="chkShowDimensions" Content="Show Dimensions" IsChecked="True" Margin="5" Checked="OnDimensionChanged" Unchecked="OnDimensionChanged"/>
                                    <CheckBox x:Name="chkShowPoints" Content="Show Points" IsChecked="True" Margin="5" Checked="OnDimensionChanged" Unchecked="OnDimensionChanged"/>
                                    <Button Content="RESET" Margin="0,15,0,0" Click="OnResetPlanElevation" Height="35" Background="#0078D4" Foreground="White" FontWeight="Bold"/>
                                </StackPanel>
                            </ScrollViewer>
                        </dxdo:LayoutPanel>

                        <!-- GROUP: PLAN + ELEVATION -->
                        <dxdo:LayoutGroup Orientation="Vertical">

                            <!-- PANEL 2: PLAN VIEW -->
                            <dxdo:LayoutPanel x:Name="panelPlanView" Caption="PLAN VIEW" AllowFloat="True" AllowClose="False">
                                <Grid>
                                    <Grid x:Name="zoomContainerPlan" Background="WhiteSmoke" ClipToBounds="True">
                                        <Canvas x:Name="planCanvas" Width="1000" Height="400" Background="Transparent"/>
                                    </Grid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15">
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomInPlan_Click" Glyph="{dx:FontIconSource 59555}" ToolTip="Zoom In" Margin="2"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomOutPlan_Click" Glyph="{dx:FontIconSource 59167}" ToolTip="Zoom Out" Margin="2"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomFitPlan_Click" Glyph="{dx:FontIconSource 59814}" ToolTip="Fit" Margin="2"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomResetPlan_Click" Glyph="{dx:FontIconSource 59180}" ToolTip="Reset" Margin="2"/>
                                        <TextBlock x:Name="txtZoomLevelPlan" Text="100%" Foreground="#0078D4" FontWeight="Bold" VerticalAlignment="Center" Margin="8,0,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </dxdo:LayoutPanel>

                            <!-- PANEL 3: ELEVATION VIEW -->
                            <dxdo:LayoutPanel x:Name="panelElevationView" Caption="ELEVATION VIEW" AllowFloat="True" AllowClose="False">
                                <Grid>
                                    <Grid x:Name="zoomContainerElevation" Background="#F0F0F0" ClipToBounds="True">
                                        <Canvas x:Name="elevationCanvas" Width="1000" Height="400" Background="Transparent"/>
                                    </Grid>
                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15">
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomInElevation_Click" Glyph="{dx:FontIconSource 59555}" ToolTip="Zoom In" Margin="2"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomOutElevation_Click" Glyph="{dx:FontIconSource 59167}" ToolTip="Zoom Out" Margin="2"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomFitElevation_Click" Glyph="{dx:FontIconSource 59814}" ToolTip="Fit" Margin="2"/>
                                        <dx:SimpleButton Width="32" Height="32" Click="ZoomResetElevation_Click" Glyph="{dx:FontIconSource 59180}" ToolTip="Reset" Margin="2"/>
                                        <TextBlock x:Name="txtZoomLevelElevation" Text="100%" Foreground="#0078D4" FontWeight="Bold" VerticalAlignment="Center" Margin="8,0,0,0"/>
                                    </StackPanel>
                                </Grid>
                            </dxdo:LayoutPanel>

                        </dxdo:LayoutGroup>
                    </dxdo:LayoutGroup>
                </dxdo:DockLayoutManager>
            </dx:DXTabItem>

            <!-- ========== TAB 2: SECTION VIEW ========== -->
            <dx:DXTabItem>
                <dx:DXTabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="/Images/SectionView.png" 
                               Width="16" Height="16" 
                               Margin="0,0,5,0"
                               RenderOptions.BitmapScalingMode="HighQuality"/>
                        <TextBlock Text="SECTION VIEW" VerticalAlignment="Center" FontWeight="SemiBold"/>
                    </StackPanel>
                </dx:DXTabItem.Header>
                <dxdo:DockLayoutManager x:Name="dockManagerSection">
                    <dxdo:LayoutGroup>

                        <!-- PANEL 1: THÔNG SỐ MẶT CẮT -->
                        <dxdo:LayoutPanel x:Name="panelSectionParams" Caption="THÔNG SỐ MẶT CẮT" AllowFloat="True" AllowClose="True" ItemWidth="320">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15">
                                    <TextBlock Text="KÍCH THƯỚC" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Width:"/>
                                        <TextBox Grid.Column="1" x:Name="txtSectionWidth" Text="5000" TextChanged="OnSectionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Height:"/>
                                        <TextBox Grid.Column="1" x:Name="txtSectionHeight" Text="3000" TextChanged="OnSectionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Wall:"/>
                                        <TextBox Grid.Column="1" x:Name="txtWallThickness" Text="300" TextChanged="OnSectionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="PHUI ĐÀO" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Depth:"/>
                                        <TextBox Grid.Column="1" x:Name="txtExcavationDepth" Text="2000" TextChanged="OnSectionChanged"/>
                                        <TextBlock Grid.Column="2" Text="mm"/>
                                    </Grid>
                                    <Grid Margin="0,5">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="90"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="45"/>
                                        </Grid.ColumnDefinitions>
                                        <TextBlock Text="Slope:"/>
                                        <TextBox Grid.Column="1" x:Name="txtSlopeRatio" Text="1.5" TextChanged="OnSectionChanged"/>
                                        <TextBlock Grid.Column="2" Text="(1:n)"/>
                                    </Grid>

                                    <Separator Margin="0,10"/>

                                    <CheckBox x:Name="chkShowSectionDimensions" Content="Show Dimensions" IsChecked="True" Margin="5" Checked="OnSectionChanged" Unchecked="OnSectionChanged"/>
                                    <CheckBox x:Name="chkShowExcavation" Content="Show Excavation" IsChecked="True" Margin="5" Checked="OnSectionChanged" Unchecked="OnSectionChanged"/>
                                    <Button Content="RESET" Margin="0,15,0,0" Click="OnResetSection" Height="35" Background="#0078D4" Foreground="White" FontWeight="Bold"/>
                                </StackPanel>
                            </ScrollViewer>
                        </dxdo:LayoutPanel>

                        <!-- PANEL 2: SECTION VIEW -->
                        <dxdo:LayoutPanel x:Name="panelSectionCanvas" Caption="SECTION VIEW" AllowFloat="True" AllowClose="False">
                            <Grid>
                                <Grid x:Name="zoomContainerSection" Background="#FAFAFA" ClipToBounds="True">
                                    <Canvas x:Name="sectionCanvas" Width="1000" Height="800" Background="Transparent"/>
                                </Grid>
                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="15">
                                    <dx:SimpleButton Width="32" Height="32" Click="ZoomInSection_Click" Glyph="{dx:FontIconSource 59555}" ToolTip="Zoom In" Margin="2"/>
                                    <dx:SimpleButton Width="32" Height="32" Click="ZoomOutSection_Click" Glyph="{dx:FontIconSource 59167}" ToolTip="Zoom Out" Margin="2"/>
                                    <dx:SimpleButton Width="32" Height="32" Click="ZoomFitSection_Click" Glyph="{dx:FontIconSource 59814}" ToolTip="Fit" Margin="2"/>
                                    <dx:SimpleButton Width="32" Height="32" Click="ZoomResetSection_Click" Glyph="{dx:FontIconSource 59180}" ToolTip="Reset" Margin="2"/>
                                    <TextBlock x:Name="txtZoomLevelSection" Text="100%" Foreground="#0078D4" FontWeight="Bold" VerticalAlignment="Center" Margin="8,0,0,0"/>
                                </StackPanel>
                            </Grid>
                        </dxdo:LayoutPanel>

                    </dxdo:LayoutGroup>
                </dxdo:DockLayoutManager>
            </dx:DXTabItem>

            <!-- ========== TAB 3: 3D VIEW ========== -->
            <dx:DXTabItem>
                <dx:DXTabItem.Header>
                    <StackPanel Orientation="Horizontal">
                        <Image Source="/Images/3DView.png" 
                           Width="16" Height="16" 
                           Margin="0,0,5,0"
                           RenderOptions.BitmapScalingMode="HighQuality"/>
                        <TextBlock Text="3D VIEW" VerticalAlignment="Center" FontWeight="SemiBold"/>
                    </StackPanel>
                </dx:DXTabItem.Header>
                <dxdo:DockLayoutManager x:Name="dockManager3D">
                    <dxdo:LayoutGroup>

                        <!-- PANEL 1: THÔNG SỐ 3D -->
                        <dxdo:LayoutPanel x:Name="panel3DParams" Caption="3D CONTROLS" AllowFloat="True" AllowClose="True" ItemWidth="280">
                            <ScrollViewer VerticalScrollBarVisibility="Auto">
                                <StackPanel Margin="15">
                                    <TextBlock Text="CAMERA" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Button Content="Front View" Click="CameraFront_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Back View" Click="CameraBack_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Top View" Click="CameraTop_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Left View" Click="CameraLeft_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Right View" Click="CameraRight_Click" Margin="0,3" Height="30"/>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="DISPLAY" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <CheckBox x:Name="chkShowWireframe" Content="Wireframe" IsChecked="False" Margin="5" Checked="OnDisplayChanged" Unchecked="OnDisplayChanged"/>
                                    <CheckBox x:Name="chkShowBoundingBox" Content="Bounding Box" IsChecked="False" Margin="5" Checked="OnDisplayChanged" Unchecked="OnDisplayChanged"/>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="MATERIAL" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <ComboBox x:Name="cmbMaterial" SelectionChanged="OnMaterialChanged" Margin="5" Height="30">
                                        <ComboBoxItem Content="Concrete" IsSelected="True"/>
                                        <ComboBoxItem Content="Steel"/>
                                        <ComboBoxItem Content="Plastic"/>
                                    </ComboBox>

                                    <Separator Margin="0,10"/>

                                    <TextBlock Text="EXPORT" FontWeight="SemiBold" Margin="0,5,0,8" Foreground="#0078D4"/>
                                    <Button Content="Export OBJ" Click="ExportOBJ_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Export STL" Click="ExportSTL_Click" Margin="0,3" Height="30"/>
                                    <Button Content="Screenshot" Click="ExportScreenshot_Click" Margin="0,3" Height="30"/>

                                    <Separator Margin="0,10"/>

                                    <Button Content="RESET 3D" Margin="0,10,0,0" Click="OnReset3D" Height="35" Background="#0078D4" Foreground="White" FontWeight="Bold"/>
                                </StackPanel>
                            </ScrollViewer>
                        </dxdo:LayoutPanel>

                        <!-- PANEL 2: 3D VIEW -->
                        <dxdo:LayoutPanel x:Name="panel3DCanvas" Caption="3D VIEW" AllowFloat="True" AllowClose="False">
                            <Grid>
                                <helix:HelixViewport3D x:Name="helixViewport" Background="WhiteSmoke" ShowViewCube="True" ShowCoordinateSystem="True"
                                    ZoomExtentsWhenLoaded="True" CameraRotationMode="Turntable" ModelUpDirection="0,1,0"
                                    RotateGesture="Shift+MiddleClick" PanGesture="MiddleClick">
                                    <helix:HelixViewport3D.Camera>
                                        <PerspectiveCamera Position="15,10,15" LookDirection="-15,-10,-15" UpDirection="0,1,0" FieldOfView="60"/>
                                    </helix:HelixViewport3D.Camera>
                                    <helix:DefaultLights/>
                                    <helix:GridLinesVisual3D Width="50" Length="50" MinorDistance="1" MajorDistance="5" Thickness="0.01" Fill="#40FFFFFF" Normal="0,1,0"/>
                                    <ModelVisual3D x:Name="modelVisual3D"/>
                                </helix:HelixViewport3D>

                                <TextBlock x:Name="txt3DInfo" Text="3D View" Foreground="White" Background="#AA000000" Padding="8,4" FontWeight="Bold" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="15"/>
                            </Grid>
                        </dxdo:LayoutPanel>

                    </dxdo:LayoutGroup>
                </dxdo:DockLayoutManager>
            </dx:DXTabItem>

        </dx:DXTabControl>
    </Grid>
</Window>