<Window x:Class="CulvertEditor.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Culvert Box - Plan View" Height="700" Width="1200"
        Background="White"
        Loaded="Window_Loaded" WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <!-- TextBox Style - AutoCAD Blue Theme -->
        <Style TargetType="TextBox">
            <Setter Property="Padding" Value="8"/>
            <Setter Property="Margin" Value="5,2"/>
            <Setter Property="Height" Value="32"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Background" Value="#FF0696D7"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#2d5f8d"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="FontSize" Value="12"/>
            <Style.Triggers>
                <Trigger Property="IsFocused" Value="True">
                    <Setter Property="BorderBrush" Value="#FF0696D7"/>
                    <Setter Property="BorderThickness" Value="1.5"/>
                    <Setter Property="Background" Value="White"/>
                    <Setter Property="Foreground" Value="#FF006CCE"/>
                </Trigger>
            </Style.Triggers>
        </Style>

        <!-- TextBlock Style - CAD Labels -->
        <Style TargetType="TextBlock">
            <Setter Property="VerticalAlignment" Value="Center"/>
            <Setter Property="Margin" Value="5,2"/>
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontSize" Value="11"/>
        </Style>

        <!-- Separator Style -->
        <Style TargetType="Separator">
            <Setter Property="Background" Value="#FF0696D7"/>
            <Setter Property="Height" Value="1"/>
            <Setter Property="Margin" Value="0,12"/>
        </Style>

        <!-- CheckBox Style - AutoCAD Blue -->
        <Style TargetType="CheckBox">
            <Setter Property="Foreground" Value="Black"/>
            <Setter Property="FontWeight" Value="Medium"/>
        </Style>

        <!-- Button Style - AutoCAD Blue -->
        <Style TargetType="Button">
            <Setter Property="Background" Value="#FF0696D7"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderBrush" Value="#2d5f8d"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" 
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="3">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#2d5f8d"/>
                    <Setter Property="BorderBrush" Value="#4a9eff"/>
                </Trigger>
                <Trigger Property="IsPressed" Value="True">
                    <Setter Property="Background" Value="#1a4672"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="320"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Panel nhập liệu - AutoCAD Dark Theme -->
        <Border Grid.Column="0" Background="White" BorderBrush="#FF0696D7" BorderThickness="0,0,1,0" Padding="15">
            <ScrollViewer VerticalScrollBarVisibility="Hidden">
                <StackPanel>
                    <TextBlock Text="KÍCH THƯỚC CỐNG HỘP" 
                               FontWeight="Bold" 
                               FontSize="15" 
                               Margin="0,0,0,15" 
                               TextWrapping="Wrap"
                               Foreground="#FF0696D7"/>

                    <!-- Kích thước tổng thể -->
                    <TextBlock Text="KÍCH THƯỚC TỔNG" 
                               FontWeight="SemiBold" 
                               Margin="0,10,0,8"
                               Foreground="#FF0696D7"
                               FontSize="12"/>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều dài tổng:"/>
                        <TextBox Grid.Column="1" x:Name="txtL_Total" Text="35000" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều cao tổng:"/>
                        <TextBox Grid.Column="1" x:Name="txtH_Total" Text="10700" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Separator/>

                    <!-- Bản quá độ -->
                    <TextBlock Text="BẢN QUÁ ĐỘ" 
                               FontWeight="SemiBold" 
                               Margin="0,10,0,8"
                               Foreground="#FF0696D7"
                               FontSize="12"/>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều dài:"/>
                        <TextBox Grid.Column="1" x:Name="txtL_Deck" Text="24500" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều cao:"/>
                        <TextBox Grid.Column="1" x:Name="txtH_Deck" Text="4000" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Khoảng cách trên:"/>
                        <TextBox Grid.Column="1" x:Name="txtOffset_Top" Text="400" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Khoảng cách dưới:"/>
                        <TextBox Grid.Column="1" x:Name="txtOffset_Bottom" Text="400" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Separator/>

                    <!-- Cửa xả trái -->
                    <TextBlock Text="CỬA XẢ TRÁI" 
                               FontWeight="SemiBold" 
                               Margin="0,10,0,8"
                               Foreground="#FF0696D7"
                               FontSize="12"/>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều dài:"/>
                        <TextBox Grid.Column="1" x:Name="txtL_LeftOutlet" Text="1800" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều cao trên:"/>
                        <TextBox Grid.Column="1" x:Name="txtH_LeftTop" Text="4200" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều cao dưới:"/>
                        <TextBox Grid.Column="1" x:Name="txtH_LeftBottom" Text="2000" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Rộng đầu ngoài:"/>
                        <TextBox Grid.Column="1" x:Name="txtW_LeftOuter" Text="6000" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Separator/>

                    <!-- Cửa xả phải -->
                    <TextBlock Text="CỬA XẢ PHẢI" 
                               FontWeight="SemiBold" 
                               Margin="0,10,0,8"
                               Foreground="#FF0696D7"
                               FontSize="12"/>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều dài:"/>
                        <TextBox Grid.Column="1" x:Name="txtL_RightOutlet" Text="1800" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều cao trên:"/>
                        <TextBox Grid.Column="1" x:Name="txtH_RightTop" Text="4200" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Chiều cao dưới:"/>
                        <TextBox Grid.Column="1" x:Name="txtH_RightBottom" Text="2000" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Grid Margin="0,5">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="130"/>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="50"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Grid.Column="0" Text="Rộng đầu ngoài:"/>
                        <TextBox Grid.Column="1" x:Name="txtW_RightOuter" Text="6000" TextChanged="OnDimensionChanged"/>
                        <TextBlock Grid.Column="2" Text="mm"/>
                    </Grid>

                    <Separator/>

                    <CheckBox x:Name="chkShowDimensions" Content="Hiển thị kích thước" Margin="5,8" IsChecked="True" Checked="OnDimensionChanged" Unchecked="OnDimensionChanged"/>
                    <CheckBox x:Name="chkShowPoints" Content="Hiển thị điểm" Margin="5,5" IsChecked="True" Checked="OnDimensionChanged" Unchecked="OnDimensionChanged"/>

                    <Button Content="RESET" Margin="0,18,0,0" Padding="12" Click="OnReset" Height="38"/>
                </StackPanel>
            </ScrollViewer>
        </Border>

        <!-- Canvas preview với zoom/pan -->
        <Border Grid.Column="1" Background="White" Padding="0">
            <Grid>
                <ScrollViewer x:Name="scrollViewer" 
                              HorizontalScrollBarVisibility="Hidden" 
                              VerticalScrollBarVisibility="Hidden"
                              Background="White">
                    <Grid x:Name="zoomGrid" 
                          Background="Transparent"
                          MouseWheel="ZoomGrid_MouseWheel"
                          MouseLeftButtonDown="ZoomGrid_MouseLeftButtonDown"
                          MouseLeftButtonUp="ZoomGrid_MouseLeftButtonUp"
                          MouseMove="ZoomGrid_MouseMove">
                        <Grid.LayoutTransform>
                            <ScaleTransform x:Name="scaleTransform" ScaleX="1" ScaleY="1"/>
                        </Grid.LayoutTransform>
                        <Canvas x:Name="planCanvas" Width="1200" Height="700" Background="White"/>
                    </Grid>
                </ScrollViewer>

                <!-- Zoom controls overlay -->
                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="20">
                    <Button Width="40" Height="40" Click="ZoomIn_Click" Margin="5" 
                            Background="White" BorderBrush="#2d5f8d">
                        <Button.Content>
                            <Image Source="/Images/Zoom In.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality"/>
                        </Button.Content>
                    </Button>
                    <Button Width="40" Height="40" Click="ZoomOut_Click" Margin="5" 
                            Background="White" BorderBrush="#2d5f8d">
                        <Button.Content>
                            <Image Source="/Images/Zoom Out.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality"/>
                        </Button.Content>
                    </Button>
                    <Button Width="40" Height="40" Click="ZoomReset_Click" Margin="5" 
                            Background="White" BorderBrush="#2d5f8d">
                        <Button.Content>
                            <Image Source="/Images/Reload.png" Width="20" Height="20" RenderOptions.BitmapScalingMode="HighQuality"/>
                        </Button.Content>
                    </Button>
                    <TextBlock x:Name="txtZoomLevel" Text="100%" Foreground="#5b9bd5" FontWeight="Bold"
                               VerticalAlignment="Center" Margin="10,0,0,0" FontSize="14"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>